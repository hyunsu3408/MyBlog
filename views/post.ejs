<div class="post-header">
    <h1><%= data.title%></h1>
    <p class="views">조회수 : <%= data.views %>회</p>
</div>

<article class="article">
    <%= data.body %>
</article>

<div class="post-actions">
    <form action="/like/<%= data._id %>" method="POST" style="display:inline;">
        <button type="submit" class="icon-button">
            <img src="/img/like.jpg" alt="좋아요" class="icon-img">
            (<%= data.likes %>)
        </button>
    </form>
    
    <form action="/dislike/<%= data._id %>" method="POST" style="display:inline;">
        <button type="submit" class="icon-button">
            <img src="/img/dislikes.jpg" alt="싫어요" class="icon-img">
            (<%= data.dislikes %>)
        </button>
    </form>
</div>

<!--댓글 작성 폼-->
<form action="/post/<%= data._id %>/comments" method="POST" class="comment-form">
    <textarea name="text" placeholder="댓글 작성" required></textarea>
    <button type="submit">댓글 등록</button>
</form>

<!--댓글 리스트-->
<section class="comments">
    <h3>댓글</h3>
    <ul>
        <% comments.forEach(comment => { %>
            <li class="comment-item">
                <div class="comment-content">
                    <strong><%= comment.username %></strong>: <%= comment.text %>
                </div>
                <div class="comment-date">
                    <small><%= new Date(comment.createdAt).toLocaleString('ko-KR') %></small>
                </div>
                <form action="/comments/<%= comment._id %>/<%= data._id %>?_method=DELETE" method="POST" style="display:inline;">
                    <!--<input type="hidden" name="_method" value="DELETE">-->
                    <button type="submit" onclick="return confirm('정말 삭제하시겠습니까?')">삭제</button>
                </form>
            </li>
        <% }) %>
    </ul>
</section>
